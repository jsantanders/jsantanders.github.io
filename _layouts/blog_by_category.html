---
layout: default
---

{% assign category = site.my_categories | where: "slug", post.category %}
{% assign category = category[0] %}
{% if category %}
    {% capture category_content %}<span>: {{ category.name }}</span>{% endcapture %}
{% endif %}

<h3>Posts by category {{ category_content }}</h3> 

<div class="text-justify">
  {% if site.categories[page.slug] %}
    {% for post in site.categories[page.slug] %}
      {% capture post_year %}{{ post.date | date: '%Y' }}{% endcapture %}
      {% if forloop.first %}
        <h4>{{ post_year }}</h4>
        <div class="notelist">
      {% endif %}
      {% unless forloop.first %}
        {% assign previous_index = forloop.index0 | minus: 1 %}
        {% capture previous_post_year %}{{ site.categories[page.slug][previous_index].date | date: '%Y' }}{% endcapture %}
        {% if post_year != previous_post_year %}
          </div>
          <h4>{{ post_year }}</h4>
          <div class="notelist">
        {% endif %}
      {% endunless %}
      <a href="{{ post.url }}" class=" fafa-link">
        <h5>{{ post.title }}</h5>
      </a>
      {% if forloop.last %}
        </div>
      {% endif %}
    {% endfor %}
  {% else %}
    <p>There are no posts in this category.</p>
  {% endif %}
</div>
